(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{4150:(e,s,o)=>{Promise.resolve().then(o.t.bind(o,2093,23)),Promise.resolve().then(o.t.bind(o,7735,23)),Promise.resolve().then(o.t.bind(o,347,23)),Promise.resolve().then(o.bind(o,8323))},8323:(e,s,o)=>{"use strict";o.d(s,{default:()=>g});var n=o(5155),l=o(2115),r=o(3391),i=o(8943),a=o(48);let d=(0,i.Z0)({name:"player",initialState:{money:0,experience:0,materials:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,mine:0},guesses:1,mineGuesses:3},reducers:{addResources:(e,s)=>{for(let o in e.money+=s.payload.money,e.experience+=s.payload.experience,e.materials)e.materials[o]+=s.payload.materials[o]}}}),{}=d.actions,t=d.reducer,u=()=>(0,i.U1)({reducer:{game:a.Ay,player:t}});function g(e){let{children:s}=e,o=(0,l.useRef)(null);return o.current||(o.current=u()),(0,n.jsx)(r.Kq,{store:o.current,children:s})}},48:(e,s,o)=>{"use strict";o.d(s,{Ar:()=>u,Ay:()=>b,Bc:()=>p,EU:()=>m,ZR:()=>t,dM:()=>g,dO:()=>d,qG:()=>c,tS:()=>a,vN:()=>f,x0:()=>h,x2:()=>v,yt:()=>G});var n=o(8943),l=o(8863);function r(e){e.currentFlagGuesses=e.flagGuesses,e.currentGuesses=e.guesses,e.opening=void 0,e.oldOpening=void 0,e.chording=void 0,e.oldChording=void 0,e.mistakes={},e.flagGuessed={},e.hidden=(0,l.pj)(e.rows,e.cols,!0),e.flagged=(0,l.pj)(e.rows,e.cols,!1),e.guessing=!1,e.won=!1,e.lost=!1,e.movesMade=0,e.cells_unopened=e.rows*e.cols,e.mines_remaining=e.mines,e.board=(0,l.NJ)(e.rows,e.cols,e.mines)}let i=(0,n.Z0)({name:"game",initialState:{rows:10,cols:10,mines:15,flagGuesses:0,currentFlagGuesses:0,guesses:3,currentGuesses:3,cells_unopened:0,mines_remaining:0,won:!1,lost:!1,board:[],flagged:[],hidden:[],flagGuessed:{},mistakes:{},guessing:!1,movesMade:0,opening:void 0,oldOpening:void 0,chording:void 0,oldChording:void 0},reducers:{flagField:(e,s)=>{let{row:o,col:n}=s.payload;(0,l.vx)(o,n,e)},clickField:(e,s)=>{let{row:o,col:n}=s.payload;e.guessing&&e.currentGuesses>0?(e.currentGuesses-=1,e.guessing=!1,-1==e.board[o][n]?(0,l.vx)(o,n,e):(0,l.Fr)([[o,n]],e)):(0,l.Fr)([[o,n]],e)},guessField:(e,s)=>{var o;let{row:n,col:r}=s.payload,i=null===(o=e.flagGuessed[n])||void 0===o?void 0:o[r];e.currentFlagGuesses>0&&(-1!=e.board[n][r]?(0,l.Bu)([n,r],e):void 0==i&&(void 0==e.flagGuessed[n]&&(e.flagGuessed[n]={}),e.flagGuessed[n][r]=(0,l.Wc)(n,r,e.board),e.currentFlagGuesses-=1)),e.movesMade++},chordGuessedField:(e,s)=>{var o;let{row:n,col:r}=s.payload,i=null===(o=e.flagGuessed[n])||void 0===o?void 0:o[r];void 0!=i?(0,l.Rw)(n,r,i,e):e.movesMade++},chordField:(e,s)=>{let{row:o,col:n}=s.payload;(0,l.Rw)(o,n,e.board[o][n],e)},regenerateGame(e){r(e)},generateGame:(e,s)=>{let{cols:o,rows:n,mines:l,guesses:i,flagGuesses:a}=s.payload;e.rows=n,e.cols=o,e.mines=l,e.flagGuesses=a,e.guesses=i,r(e)},openCorners:e=>{(0,l.Fr)([[0,0],[0,e.cols-1],[e.rows-1,0],[e.rows-1,e.cols-1]],e)},setGuessing:(e,s)=>{e.guessing=s.payload},setOpening:(e,s)=>{e.oldOpening=e.opening,e.opening=s.payload},setChording:(e,s)=>{e.oldChording=e.chording,e.chording=s.payload},resetOpeningChording:e=>{e.oldOpening=e.opening,e.opening=void 0,e.oldChording=e.chording,e.chording=void 0}}}),{flagField:a,clickField:d,chordField:t,generateGame:u,openCorners:g,setGuessing:c,regenerateGame:f,guessField:m,chordGuessedField:p,setOpening:v,setChording:h,resetOpeningChording:G}=i.actions,b=i.reducer},8863:(e,s,o)=>{"use strict";function n(e,s,o){return e>=0&&e<o.length&&s>=0&&s<o[e].length}function l(e){return Math.floor(Math.random()*e)}o.d(s,{Fr:()=>f,Rw:()=>d,NJ:()=>u,pj:()=>g,um:()=>i,Wc:()=>a,Bu:()=>c,vx:()=>t});var r=o(9113);function i(e,s,o){return o/(e*s)}function a(e,s,o){let l=0;for(let r=-1;r<2;r++)for(let i=-1;i<2;i++)n(e+r,s+i,o)&&(0!=r||0!=i)&&(l+=-1==o[e+r][s+i]?1:0);return l}function d(e,s,o,l){let r=0,i=[];for(let o=e-1;o<e+2;o++)for(let a=s-1;a<s+2;a++)n(o,a,l.board)&&!(o==e&&a==s)&&(l.flagged[o][a]?r++:i.push([o,a]));r==o?f(i,l):l.movesMade++}function t(e,s,o){o.mines_remaining+=o.flagged[e][s]?1:-1,o.flagged[e][s]=!o.flagged[e][s],o.movesMade++}function u(e,s,o){let n=[];for(let o=0;o<e;o++){n.push([]);for(let e=0;e<s;e++)n[o].push(0)}let r=0;for(;r<o;){let[o,i]=[l(e),l(s)];void 0==[[0,s-1],[0,0],[e-1,0],[e-1,s-1]].find(e=>o==e[0]&&i==e[1])&&(r+=-1==n[o][i]?0:1,n[o][i]=-1)}for(let o=0;o<e;o++)for(let e=0;e<s;e++)-1!=n[o][e]&&(n[o][e]=a(o,e,n));return n}function g(e,s,o){let n=[];for(let l=0;l<e;l++){n.push([]);for(let e=0;e<s;e++)n[l][e]=o}return n}function c(e,s){let{mistakes:o,flagged:n}=function(e){let s={},o=r.cloneDeep(e.flagged);for(let n=0;n<e.flagged.length;n++)for(let l=0;l<e.flagged[n].length;l++)e.flagged[n][l]&&-1!=e.board[n][l]&&(void 0==s[n]&&(s[n]={}),s[n][l]=!0,o[n][l]=!1);return{mistakes:s,flagged:o}}(s);void 0==o[e[0]]&&(o[e[0]]={}),o[e[0]][e[1]]=!0,s.hidden=g(s.rows,s.cols,!1),s.flagged=n,s.lost=!0,s.mistakes=o}function f(e,s){s.movesMade++;for(let o=0;o<e.length;o++){let[n,l]=e[o];if(-1==s.board[n][l]){c([n,l],s);return}}let o={},l=[],i=0;for(let n=0;n<e.length;n++){let[r,a]=e[n];s.hidden[r][a]&&(void 0==o[r]&&(o[r]=[]),o[r][a]=!0,i++,0==s.board[r][a]&&l.push([r,a]))}for(;l.length>0;){let[e,r]=l[0];l.shift();for(let d=-1;d<2;d++)for(let t=-1;t<2;t++)if(n(e+d,r+t,s.board)&&!s.flagged[e+d][r+t]&&!(0==d&&0==t)){var a;!s.hidden[e+d][r+t]||(null===(a=o[e+d])||void 0===a?void 0:a[r+t])||s.flagged[e+d][r+d]||(void 0==o[e+d]&&(o[e+d]=[]),o[e+d][r+t]=!0,i++,0==s.board[e+d][r+t]&&l.push([e+d,r+t]))}}let d=[...s.hidden],t=[];for(let e in o){for(let n in t=r.cloneDeep(s.hidden[e]),o[e])t[Number(n)]=!1;d[Number(e)]=t}!function(e,s,o){if(s==o.mines){let e=g(o.rows,o.cols,!1);for(let s=0;s<o.rows;s++)for(let n=0;n<o.cols;n++)e[s][n]=-1==o.board[s][n];o.hidden=g(o.rows,o.cols,!1),o.flagged=e,o.mines_remaining=0,o.cells_unopened=s,o.won=!0}else o.hidden=e,o.cells_unopened=s}(d,s.cells_unopened-i,s)}},347:()=>{},2093:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_aa3553",variable:"__variable_aa3553"}},7735:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_ca5255",variable:"__variable_ca5255"}}},e=>{var s=s=>e(e.s=s);e.O(0,[360,935,505,441,517,358],()=>s(4150)),_N_E=e.O()}]);